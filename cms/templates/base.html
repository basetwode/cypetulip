{% load staticfiles %}
{% load i18n %}
{% load bootstrap4 %}
{% bootstrap_css %}
{% bootstrap_javascript jquery='full' %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Theme Template for Bootstrap</title>
    <script src="{% static 'js/functions.js' %}"></script>
    <script src="{% static 'cms/js/site-loader.js' %}"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
          media="screen">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <!-- Custom styles for this template -->
    <link href="/cms/theme.css" rel="stylesheet">

    <link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    {% block head %}
    {% endblock %}
</head>

<body role="document">
<!-- Modal -->
<div id="wait-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1>Processing...</h1>
            </div>
            <div class="modal-body">
                <div class="progress">
                    <div class="progress-bar progress-bar-success progress-bar-striped" id="progressbar"
                         role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                        <span class="sr-only">40% Complete (success)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<header class="shop-header py-3">
    <div class="container">
        <div class="row flex-nowrap justify-content-between align-items-center">
            <div class="col-4 pt-1">
                <a class="text-muted" href="#">{% trans 'Payment Methods'%} </a>
            </div>
            <div class="col-4 text-center">
                <a class="blog-header-logo text-dark" href="#">{% trans 'Ship Methods' %}</a>&ensp;&#x007C;&ensp;
                <a class="blog-header-logo text-dark" href="#">{% trans 'Free Ship' %}</a>
            </div>
            <div class="col-4 d-flex justify-content-end align-items-center">
                <a class="text-muted" href="#">
                    <i class="fa fa-search mx-3"></i>
                </a>
                <a class="btn btn-sm btn-outline-secondary" href="#">Sign up</a>
            </div>
        </div>
    </div>

</header>
<!-- Fixed navbar -->
<nav class="navbar navbar-expand-sm navbar-light bg-light sticky-top">
    <div class="container">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#navbar"
                aria-expanded="false" aria-controls="navbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand" href="#">{{ title }}</a>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="navbar-nav navbar-left">
                {% for page in sites %}
                    <li class="nav-item">
                        <a class="nav-link"
                           href="{% if page.link %}{{ page.link }}">{% else %}/cms/{{ page.page_name }}/">{% endif %}
                           {% trans page.page_name %}</a>
                    </li>
                {% endfor %}
            </ul>
            <ul class="ml-auto nav navbar-nav navbar-right ">
                <li id="lang-dropdown" class="nav-item dropdown">
                    <a href="#lang-dropdown" style="text-transform: uppercase" class="dropdown-toggle nav-link"
                       data-toggle="dropdown" data-target="#lang-dropdown"
                       role="button" aria-haspopup="true"
                       aria-expanded="false"><img class="flag flag-{{ language }}"/> {{ language }} </a>
                    <div class="dropdown-menu">
                        <form id="lang-form">
                            {% csrf_token %}
                        </form>
                        <a class="dropdown-item" onclick="setLanguage('de')"><img class="flag flag-de"/> Deutsch</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" onclick="setLanguage('en')"><img class="flag flag-en"/> English</a>
                    </div>
                </li>
                {% if user.is_authenticated %}

                    <li id="shopping-cart" class="cart nav-item dropdown">
                        <a href="#shopping-cart" class="dropdown-toggle nav-link"
                           data-target="#shopping-cart" data-toggle="dropdown" role="button"
                           aria-haspopup="true"
                           aria-expanded="false"><i class="fa fa-shopping-cart"></i>
                            <span>{% trans ' Shoppingcart ' %}
                                {% if number_items > 0 %}
                                    ({{ number_items }})
                                {% endif %}
                            </span>
                            <span class="caret"></span>
                        </a>
                        <div class="dropdown-menu padding-1rem" id="shoppingcart">
                            <span class="dropdown-header "> {% trans 'Your shoppingcart' %}</span>
                            {% for order in open_orders %}
                                <div class="dropdown-divider"></div>
                                <div class="cart-item row dropdown-item">
                                    <div class="col-md-12 col-lg-12 col-sm-12" style="min-height: 30px">
                                        <div class="col-md-5 col-lg-5 col-sm-3">
                                            <div style="max-height: 50px; overflow: hidden"
                                                 class="col-md-4 content-img">
                                                <img style="width: 100%"
                                                     src="/media/{{ order.product.product.product_picture.url }}">
                                            </div>
                                        </div>
                                        <div class="col-md-5 col-lg-5 col-sm-7">
                                            <h5>{{ order.product.name }}</h5>
                                        </div>
                                        <div class="col-md-2 col-lg-2 col-sm-2">
                                            {{ order.product.price }} &euro;
                                        </div>
                                    </div>
                                </div>

                            {% endfor %}
                            <div class="dropdown-divider"></div>
                            <div class="row">
                                <span class="col-4">{% trans 'Total: ' %}</span>
                                <span class="col-8 text-align-right">{{ total_cart }} &euro;</span>

                            </div>
                            <div class="dropdown-divider"></div>
                            <br>
                            <div class="text-align-right">
                                <a href="/shop/cart"
                                   class="btn btn-secondary btn-sm text-align-right">{% trans 'Open cart' %}</a>
                            </div>


                        </div>
                    </li>
                    <li id="usermenu" class="nav-item dropdown">
                        <a href="#usermenu" style="text-transform: capitalize;" class="dropdown-toggle nav-link"
                           data-toggle="dropdown"
                           role="button" aria-haspopup="true" data-target="#usermenu"
                           aria-expanded="false"><i class="fa fa-user"></i> {{ user.username }} <span class="caret"></span></a>
                        <div class="dropdown-menu">
                            <span class="dropdown-header">{{ user.first_name }} {{ user.last_name }}</span>
                            <a class="dropdown-item" href="{% url 'my_account' %}">{% trans 'My account' %}</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="{% url 'all_orders' %}">{% trans 'All orders' %}</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="{% url 'account_settings' %}">{% trans 'Settings' %}</a>
                            {% if user.is_staff %}
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item"
                                   href="{% url 'management_index' %}">{% trans 'Management' %}</a>
                            {% endif %}
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="/shop/logout">{% trans 'Logout' %}</a>
                        </div>
                    </li>
                {% else %}
                    <li class="nav-item">
                        <a class="nav-link" href="/shop/login">{% trans 'Login' %}</a>
                    </li>

                {% endif %}
            </ul>

        </div>
        <!--/.nav-collapse -->
    </div>
</nav>

<main role="main" id="main" style="margin-top: 50px;min-height: 600px">
    <div id="noty-holder">

        <div id="alert-danger" class="alert alert-danger alert-dismissable page-alert" hidden>
            <button type="button" class="close" onclick="$(this).parent().hide()"><span aria-hidden="true">×</span><span
                    class="sr-only">Close</span>
            </button>
            <div id="danger-text">
                Ups, something went wrong. Please try again later or contact an administrator.
            </div>
        </div>
        <div id="alert-success" class="alert alert-success alert-dismissable page-alert" hidden>
            <button type="button" class="close" onclick="$(this).parent().hide()"><span aria-hidden="true">×</span><span
                    class="sr-only">Close</span>
            </button>
            <div id="success-text">
                {% trans 'Sent' %} {% trans 'successfully' %}</div>
        </div>
        <div id="alert-warning" class="alert alert-warning alert-dismissable page-alert" hidden>
            <button type="button" class="close" onclick="$(this).parent().hide()"><span aria-hidden="true">×</span><span
                    class="sr-only">Close</span>
            </button>
            <div id="warning-text">
                Looks like you've missed some fields
            </div>
        </div>
    </div>
    {% block body %}
    {% endblock %}

</main>
<footer class="col-md-12 footer">
    <div class="cold-md-4">
        <p class="text">
            <i>CypeTulip - Shopsystem</i>
            <span> &copy; BWK Technik GbR</span>
        </p>
    </div>
    <hr>
    <div class="col-md-4 center divider">
        <p style="font-size: smaller" class="text">Version<br>
            CypeTulip <span>{{ version }}</span><br>
        </p>
    </div>
    <hr>
    <div class="cold-md-4 divider">
        <img class="center" width="100" src="{% static 'images/test_small.png' %}">
    </div>
</footer>


<!-- /container -->

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->

<script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
<script src="{% static 'dist/js/bootstrap.min.js' %}"></script>
<script src="{% static 'assets/js/docs.min.js' %}"></script>
</body>
</html>
