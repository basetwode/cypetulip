{% extends 'base.html' %}
{% load static %}
{% load recurse %}
{% load i18n %}
{% load bootstrap4 %}
{% load fb_versions %}

{% block head %}
    <title>{% trans 'Products' %} {% if selected_category %} - {{ selected_category }}{% endif %} - {{ title }}</title>
{% endblock %}

{% block body %}

    {% include 'modals/price_on_request.html' %}
    {% bootstrap_messages %}
    <div class="row products">

        <div class="col-md-12 path">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb rounded-0">
                    <li class="breadcrumb-item {% if not selected_category %} active{% endif %}"
                        aria-current="{% if not selected_category %} page{% endif %}"><a
                            href="{% url 'shop:products' %}">
                        {% trans 'Products' %}
                    </a></li>
                    {% if selected_category.mother_category %}
                        <li class="breadcrumb-item"><a href="{% url 'shop:products' selected_category.mother_category.path %}">
                            {{ selected_category.mother_category }}
                        </a></li>
                    {% endif %}
                    {% if selected_category %}
                        <li class="breadcrumb-item {% if selected_category %} active{% endif %} " aria-current="page"><a
                                href="{% url 'shop:products' selected_category.path%}">
                            {{ selected_category }}
                        </a>
                        </li>
                    {% endif %}

                </ol>
            </nav>

        </div>
        <div class="col-md-3 categories">
            <div class="position-sticky">
                <div class="categories-list" id="accordionCategories">
                    <div class="card border-0">
                        <div class="">
                            <h4>
                                {% trans 'Categories' %}
                            </h4>
                        </div>
                        <div id="collapseCategories" class="panel-collapse collapse show">
                            <ul class="list-group">
                                {% include 'category-tree.html' %}
                            </ul>
                        </div>
                    </div>

                </div>
                {% include 'attribute_side_bar.html' %}
            </div>
        </div>
        <div class="col-md-9 products">
            {% if sections %}
                {% for section in sections %}
                    <div class="col-12">
                        {{ section.content|safe }}
                    </div>
                {% endfor %}
            {% endif %}
            <div class="products-list card-deck mt-3 mt-md-0">
            <div class="row w-100">
                <div class="col-12 pl-4">
                    <h1>{% trans 'Products' %}{% if selected_category %} - {{ selected_category }}{% endif %}</h1>
                </div>
            </div>
                <div class="row w-100" style="margin: 0px">
                    {% if not products %}
                        {% trans 'Sorry, we are out of stock in this category!' %}
                    {% endif %}
                    {% for product in products %}

                        <div class="product-card col-xl-4 col-6 p-2">
                            {% include 'product/product-card.html' with product=product %}
                        </div>
                    {% endfor %}
                </div>


            </div>
            <div class="pagination text-xs-center justify-content-center"
                 style="align-content: center; text-align: center">
                {% bootstrap_pagination products extra=request.GET.urlencode %}
            </div>
        </div>
    </div>
{% endblock %}
{% block renderblocking %}

    <script src="{% static 'products.js' %}"></script>
    <script src="{% static 'utils.js' %}"></script>

{% endblock %}